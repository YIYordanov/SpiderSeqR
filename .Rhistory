searchForTerm(library_strategy = "rub", gene = "nth")
devtools::load_all()
searchForTerm(library_strategy = "rub", gene = "nth")
devtools::load_all()
searchForTerm(library_strategy = "rub", gene = "nth")
searchForTerm(library_strategy = "RNA-Seq", gene = "xxxxx")
searchForTerm(library_strategy = "ChIP-Seq", gene = "STAT5A")
devtools::load_all()
?manageLibraryStrategy
devtools::document()
?manageLibraryStrategy
devtools::test()
devtools::test()
searchForAccession("SRR3319546")
searchForTerm("GSE71540")
searchForAccession("GSE71540")
convertAccession("GSE71540")
manageLibraryStrategy(task = "ex")
class(manageLibraryStrategy(task = "ex"))
is.list(manageLibraryStrategy(task = "ex"))
devtools::test()
View(temp_output_df)
removeMatches("temp")
rm(i)
rm(split)
rm(x)
rm(z)
rm(t)
getDatabaseInformation()
gse_sample <- getDatabaseInformation()
View(gse_sample)
convertAccession("GSE71540")
searchForAccession("GSE71540")
View(temp_geo_df)
View(temp_srr_gsm_df)
View(temp_sra_df)
View(temp_geo_srr_gsm_df)
View(temp_sra_df)
View(temp_srr_gsm_df)
View(temp_sra_df)
View(temp_geo_srr_gsm_df)
View(temp_geo_srr_gsm_sra_df)
removeMatches("temp")
searchForAccession("GSE71540")
removeMatches("temp")
convertAccession("GSE71540")
View(temp_sra_df)
View(temp_srr_gsm_df)
removeMatches("temp")
searchForAccession("GSE71540")
searchForAccession("GSE71540")
View(temp_sra_df)
devtools::load_all()
searchForAccession("GSE71540")
View(temp_sra_df)
searchForAccession("GSE71540")
devtools::load_all()
searchForAccession("GSE71540")
convertAccession("GSE71540")
sql_sra_columns <- c("run_accession", "study_accession")
sra_df <- setNames(data.frame(matrix(ncol = length(sql_sra_columns), nrow = 0)), sql_sra_columns)
sra_df
View(sra_df)
package?RSQLite
dbListFields(sra_con, "sra")
?DBI::dbGetFields
?dbGetFields
??dbGetFields
?DBI::dbListFields
listSRAFields <- function(){
database_name <- "sra_con"
database_env <- ".GlobalEnv"
sra_table <- "sra"
y <- DBI::dbListFields(get(database_name, envir = get(database_env)), sra_table)
return(y)
}
listSRAFields()
rm(listSRAFields())
rm(listSRAFields
)
devtools::document()
devtools::load_all()
searchForAccession("GSE71540")
View(temp_geo_df)
View(temp_geo_srr_gsm_sra_df)
is.na(temp_geo_srr_gsm_sra_df$sample_attribute)
is.na(unique(temp_geo_srr_gsm_sra_df$sample_attribute))
sum)(is.na((temp_geo_srr_gsm_sra_df$sample_attribute))
sum((is.na((temp_geo_srr_gsm_sra_df$sample_attribute)))
)
sum((is.na((temp_geo_srr_gsm_sra_df$sample_attribute))))
View(temp_sra_df)
sum((is.na((sra_df$sample_attribute))))
sum((!is.na((sra_df$sample_attribute))))
sum((!is.na((temp_geo_srr_gsm_sra_df$sample_attribute))))
sum((is.na((sra_df$sample_attribute))))
sum(!is.na("sth"))
sum(!is.na(NULL))
sum(!is.na(rep(NA,3))
)
sum(!is.na(rep(c(NA, "wth"),3))
)
devtools::load_all()
searchForAccession("GSE71540")
devtools::load_all()
searchForAccession("GSE71540")
devtools::load_all()
searchForAccession("GSE71540")
searchForAccession("GSE71540")
devtools::load_all()
searchForAccession("GSE71540")
View(temp_out)
devtools::load_all()
searchForAccession("GSE71540")
devtools::load_all()#
searchForAccession("GSE71540")
devtools::load_all()#
searchForAccession("GSE71540")
searchForAccession("ERP001752")
devtools::load_all()#
searchForAccession("ERP001752")
devtools::document()
devtools::document()
devtools::document()
devtools::load_all()#
View(temp_out)
colnames(temp_out)
x <- c("7", "uu", "ff")
temp_out[, x] <- NA
colnames(temp_out)
temp_out[, x[-1]] <- NA
colnames(temp_out)
temp_out <- temp_out[, -c(123:125)]
temp_out[, x[-1]] <- NA
colnames(temp_out)
x
devtools::load_all()#
searchForAccession("ERP001752")
searchForAccession("ERP001752")
searchForAccession("SRR340079")
View(temp_geo_df)
View(gse_sample)
GSE31477 <- dbGetQuery(geo_con, "SELECT * FROM gse WHERE gse = 'GSE31477'")
View(GSE31477)
View(gse_sample)
GSM782123 <- dbGetQuery(geo_con, "SELECT * FROM gsm WHERE gsm = 'GSM782123'")
View(GSM782123)
identical(temp_geo_df)
identical(temp_geo_df, GSM782123)
View(geo_sample)
View(gse_sample)
dbGetQuery(geo_con, "SELECT count(*) FROM gsm WHERE series_id LIKE '%,%'")
dbGetQuery(geo_con, "SELECT count(*) FROM gsm")
dbGetQuery(geo_con, "SELECT count(*) FROM gse WHERE gse LIKE '%,%'")
dbGetQuery(geo_con, "SELECT count(*) FROM gse WHERE pubmed_id IS NULL")
dbGetQuery(geo_con, "SELECT count(*) FROM gse")
convertAccession("GSE31477")
temp <- .Last.value
View(temp)
temp <- convertAccession("ERP001752")
temp <- convertAccession("SRR340079")
View(sra_sample)
View(temp_geo_df)
View(temp_geo_srr_gsm_df)
View(temp_out)
View(temp_sra_df)
View(temp_sra_df)
View(temp_sra_srr_gsm_df)
View(temp_sra_srr_gsm_geo_df)
View(temp_srr_gsm_df)
View(geo_sample)
temp <- convertAccession("GSM739901")
View(temp)
searchForTerm("GSM739901")
searchForAccessio("GSM739901")
searchForAccession("GSM739901")
GSE29870 <- dbGetQuery(geo_con, "SELECT * FROM gse WHERE gse = ;;")
GSE29870 <- dbGetQuery(geo_con, "SELECT * FROM gse WHERE gse = 'GSE29870'")
View(GSE29870)
GSE29873 <- dbGetQuery(geo_con, "SELECT * FROM gse WHERE gse = 'GSE29873'")
View(GSE29873)
dbGetQuery(geo_con, "SELECT count(*) FROM gse WHERE pubmed_id LIKE '%,%'")
dbGetQuery(geo_con, "SELECT count(*) FROM gse")
dbGetQuery(geo_con, "SELECT count(*) FROM gse WHERE pubmed_id IS NULL")
67658/114406
gse_tot <- dbGetQuery(geo_con, "SELECT count(*) FROM gse") #114406
gse_no_pubmed <- dbGetQuery(geo_con, "SELECT count(*) FROM gse WHERE pubmed_id IS NULL") #67658
1-(gse_no_pubmed/gse_tot)
gse_tot <- dbGetQuery(geo_con, "SELECT count(*) FROM gse") #114406
gse_no_pubmed <- dbGetQuery(geo_con, "SELECT count(*) FROM gse WHERE pubmed_id IS NULL") #67658
1-as.numeric((gse_no_pubmed/gse_tot))
dbGetQuery(geo_con, "SELECT count(*) FROM gse WHERE pubmed_id LIKE '%,%'")
gsm_tot <- dbGetQuery(geo_con, "SELECT count(*) FROM gsm")
gsm_tot
gsm_min_two_gse <- dbGetQuery(geo_con, "SELECT count(*) FROM gsm WHERE series_id LIKE '%,%'")
gsm_min_two_gse
gse_multiple <- dbGetQuery(geo_con, "SELECT count(*) FROM gse WHERE gse LIKE '%,%'")
rm(gse_multiple)
dbGetQuery(geo_con, "SELECT count(*) FROM gse WHERE gse LIKE '%,%'")
gsm_min_two_gse/gsm_tot
View(geo_sample)
gsm_sample <- geo_sample
rm(geo_sample)
View(gsm_sample)
View(gsm_sample)
test1 <- gsm_sample[1:3,]
View(test1)
seq_along(test1)
dim(test1)
dim(test1)[1]
strsplit("sth,ss,s", split = ",")
unlist(strsplit("sth,ss,s", split = ","))
unlist(strsplit("sth", split = ","))
View(gse_sample)
paste(1:3, collapse = ", ")
test1 <- gsm_sample[1:3,]
x <- test1
database_name <- "geo_con"
database_env <- ".GlobalEnv"
x_length <- dim(x)[1]
x$pubmed_id <- NA
for (i in 1:x_length){
series <- x$series_id[i]
series <- unlist(strplit(series, split = ","))
p <- NULL
for (j in seq_along(series)){
p <- c(p, as.character(DBI::dbGetQuery(get(database_name, envir = get(database_env)), paste0("SELECT pubmed_id FROM gse WHERE gse = '", series[j], "'"))))
}
p <- unique(p)
p <- collapse(p, collapse = ",")
x$pubmed_id[i] <- p
}
test1 <- gsm_sample[1:3,]
x <- test1
database_name <- "geo_con"
database_env <- ".GlobalEnv"
x_length <- dim(x)[1]
x$pubmed_id <- NA
for (i in 1:x_length){
series <- x$series_id[i]
series <- unlist(strsplit(series, split = ","))
p <- NULL
for (j in seq_along(series)){
p <- c(p, as.character(DBI::dbGetQuery(get(database_name, envir = get(database_env)), paste0("SELECT pubmed_id FROM gse WHERE gse = '", series[j], "'"))))
}
p <- unique(p)
p <- collapse(p, collapse = ",")
x$pubmed_id[i] <- p
}
test1 <- gsm_sample[1:3,]
x <- test1
database_name <- "geo_con"
database_env <- ".GlobalEnv"
x_length <- dim(x)[1]
x$pubmed_id <- NA
for (i in 1:x_length){
series <- x$series_id[i]
series <- unlist(strsplit(series, split = ","))
p <- NULL
for (j in seq_along(series)){
p <- c(p, as.character(DBI::dbGetQuery(get(database_name, envir = get(database_env)), paste0("SELECT pubmed_id FROM gse WHERE gse = '", series[j], "'"))))
}
p <- unique(p)
p <- paste(p, collapse = ",")
x$pubmed_id[i] <- p
}
View(x)
test1 <- gsm_sample[1:3,]
test1 <- gsm_sample[1:6,]
x <- test1
database_name <- "geo_con"
database_env <- ".GlobalEnv"
x_length <- dim(x)[1]
x$pubmed_id <- NA
for (i in 1:x_length){
series <- x$series_id[i]
series <- unlist(strsplit(series, split = ","))
p <- NULL
for (j in seq_along(series)){
p <- c(p, as.character(DBI::dbGetQuery(get(database_name, envir = get(database_env)), paste0("SELECT pubmed_id FROM gse WHERE gse = '", series[j], "'"))))
}
p <- unique(p)
p <- paste(p, collapse = ",")
x$pubmed_id[i] <- p
}
View(x)
GSE53023 <- dbGetQuery(geo_con, "SELECT * FROM gse WHERE gse = 'GSE53023'")
View(GSE53023)
GSE53026 <- dbGetQuery(geo_con, "SELECT * FROM gse WHERE gse = 'GSE53026'")
View(GSE53026)
GSE59732 <- dbGetQuery(geo_con, "SELECT * FROM gse WHERE gse = 'GSE59732'")
View(GSE59732)
View(gsm_sample)
test1 <- gsm_sample[1:3,]
test1 <- gsm_sample[1:6,]
test1 <- gsm_sample[7:13,]
x <- test1
database_name <- "geo_con"
database_env <- ".GlobalEnv"
x_length <- dim(x)[1]
x$pubmed_id <- NA
for (i in 1:x_length){
series <- x$series_id[i]
series <- unlist(strsplit(series, split = ","))
p <- NULL
for (j in seq_along(series)){
p <- c(p, as.character(DBI::dbGetQuery(get(database_name, envir = get(database_env)), paste0("SELECT pubmed_id FROM gse WHERE gse = '", series[j], "'"))))
}
p <- unique(p)
p <- paste(p, collapse = ",")
x$pubmed_id[i] <- p
}
View(x)
class(x$pubmed_id)
class(x$pubmed_id[1])
is.na(x$pubmed_id[1])
test1 <- gsm_sample[1:3,]
test1 <- gsm_sample[1:6,]
test1 <- gsm_sample[7:13,]
x <- test1
database_name <- "geo_con"
database_env <- ".GlobalEnv"
x_length <- dim(x)[1]
x$pubmed_id <- NA
for (i in 1:x_length){
series <- x$series_id[i]
series <- unlist(strsplit(series, split = ","))
p <- NULL
for (j in seq_along(series)){
p <- c(p, as.character(DBI::dbGetQuery(get(database_name, envir = get(database_env)), paste0("SELECT pubmed_id FROM gse WHERE gse = '", series[j], "'"))))
}
p <- unique(p)
p <- paste(p, collapse = ",")
x$pubmed_id[i] <- p
}
x <- x[,c(1:4, 33, 5:32)]
View(x)
test1 <- gsm_sample[1:3,]
test1 <- gsm_sample[1:6,]
test1 <- gsm_sample[7:13,]
x <- test1
database_name <- "geo_con"
database_env <- ".GlobalEnv"
x_length <- dim(x)[1]
x$pubmed_id <- NA
for (i in 1:x_length){
series <- x$series_id[i]
series <- unlist(strsplit(series, split = ","))
p <- NULL
for (j in seq_along(series)){
p <- c(p, as.character(DBI::dbGetQuery(get(database_name, envir = get(database_env)), paste0("SELECT pubmed_id FROM gse WHERE gse = '", series[j], "'"))))
}
p <- unique(p)
p <- paste(p, collapse = ",")
x$pubmed_id[i] <- p
}
x <- x[,c(1:5, 33, 6:32)]
dbGetQuery(geo_con, "SELECT series_id, pubmed_id FROM gse WHERE gse = 'GSE79551'")
dbGetQuery(geo_con, "SELECT gse, pubmed_id FROM gse WHERE gse = 'GSE79551'")
dbGetQuery(geo_con, "SELECT gse, pubmed_id FROM gse WHERE gse = 'GSE52004'")
dbGetQuery(geo_con, "SELECT gse, pubmed_id FROM gse WHERE gse = 'GSE62623'")
ss_sample <- dbGetQuery(geo_con, "SELECT * FROM gsm WHERE series_id LIKE '%,%' ORDER BY RANDOM() LIMIT 50")
View(ss_sample)
test1 <- gsm_sample[1:3,]
test1 <- gsm_sample[1:6,]
test1 <- gsm_sample[7:13,]
x <- test1
x <- ss_sample
database_name <- "geo_con"
database_env <- ".GlobalEnv"
x_length <- dim(x)[1]
x$pubmed_id <- NA
for (i in 1:x_length){
series <- x$series_id[i]
series <- unlist(strsplit(series, split = ","))
p <- NULL
for (j in seq_along(series)){
p <- c(p, as.character(DBI::dbGetQuery(get(database_name, envir = get(database_env)), paste0("SELECT pubmed_id FROM gse WHERE gse = '", series[j], "'"))))
}
p <- unique(p)
p <- paste(p, collapse = ",")
x$pubmed_id[i] <- p
}
x <- x[,c(1:5, 33, 6:32)]
View(x)
test1 <- gsm_sample[1:3,]
test1 <- gsm_sample[1:6,]
test1 <- gsm_sample[7:13,]
x <- test1
x <- ss_sample
database_name <- "geo_con"
database_env <- ".GlobalEnv"
x_length <- dim(x)[1]
x$pubmed_id <- NA
for (i in 1:x_length){
series <- x$series_id[i]
series <- unlist(strsplit(series, split = ","))
p <- NULL
for (j in seq_along(series)){
p <- c(p, as.character(DBI::dbGetQuery(get(database_name, envir = get(database_env)), paste0("SELECT pubmed_id FROM gse WHERE gse = '", series[j], "'"))))
}
p <- unique(p)
p <- paste(p, collapse = ",")
x$pubmed_id[i] <- p
}
x <- x[,c(1:5, 33, 6:32)]
saveRDS(ss_sample, "ss_sample_gsm_with_multiple_gses.Rda")
test1 <- gsm_sample[1:3,]
test1 <- gsm_sample[1:6,]
test1 <- gsm_sample[7:13,]
x <- test1
#x <- ss_sample
database_name <- "geo_con"
database_env <- ".GlobalEnv"
x_length <- dim(x)[1]
x$pubmed_id <- NA
for (i in 1:x_length){
series <- x$series_id[i]
series <- unlist(strsplit(series, split = ","))
p <- NULL
for (j in seq_along(series)){
p <- c(p, as.character(DBI::dbGetQuery(get(database_name, envir = get(database_env)), paste0("SELECT pubmed_id FROM gse WHERE gse = '", series[j], "'"))))
}
p <- unique(p)
p <- paste(p, collapse = ",")
x$pubmed_id[i] <- p
}
x <- x[,c(1:5, 33, 6:32)]
x <- ss_sample
database_name <- "geo_con"
database_env <- ".GlobalEnv"
x_length <- dim(x)[1]
x$pubmed_id <- NA
for (i in 1:x_length){
series <- x$series_id[i]
series <- unlist(strsplit(series, split = ","))
p <- NULL
for (j in seq_along(series)){
p <- c(p, as.character(DBI::dbGetQuery(get(database_name, envir = get(database_env)), paste0("SELECT pubmed_id FROM gse WHERE gse = '", series[j], "'"))))
}
p <- unique(p)
p <- paste(p, collapse = ",")
x$pubmed_id[i] <- p
}
x <- x[,c(1:5, 33, 6:32)]
saveRDS(x, "ss_sample_gsm_with_multiple_gses_PUBMED_added.Rda")
dbGetQuery(geo_con, "SELECT gse, pubmed_id FROM gse WHERE gse = '29235940'")
dbGetQuery(geo_con, "SELECT gse, pubmed_id FROM gse WHERE gse = 'GSE107437'")
dbGetQuery(geo_con, "SELECT gse, pubmed_id FROM gse WHERE gse = 'GSE107460'")
dbGetQuery(geo_con, "SELECT gse, pubmed_id FROM gse WHERE gse = 'GSE40366'")
dbGetQuery(geo_con, "SELECT gse, pubmed_id FROM gse WHERE gse = 'GSE65218'")
dbGetQuery(geo_con, "SELECT gse, pubmed_id FROM gse WHERE gse = 'GSE34861'")
dbGetQuery(geo_con, "SELECT gse, pubmed_id FROM gse WHERE gse = 'GSE34941'")
dbGetQuery(geo_con, "SELECT gse, pubmed_id FROM gse WHERE gse = 'GSE56047'")
dbGetQuery(geo_con, "SELECT gse, pubmed_id FROM gse WHERE gse = 'GSE56581'")
temp <- dbGetQuery(geo_con, "SELECT * FROM gse WHERE pubmed_id IS NOT NULL ORDER BY RANDOM() LIMIT 100")
View(temp)
p <- c(1,2,NA,4)
p <- p[!is.na(p)]
p
p <- c(1,2,"NA",4)
p[which(p=="NA")]
which(p=="NA")
which("NA" %in% p)
p
which("NA"==p)
p[which("NA"==p)]
p[which("NA"==p)[[1]]]
grep("^NA$", p)
p[grep("^NA$", p)]
p[grepl("^NA$", p)]
p
[grepl("^NA$", p)]
grepl("^NA$", p)
class()
class(p)
p <- c(1,2,"NA",4)
ind <- grepl("^NA$", p)
ind
p[ind]
class(ind)
p[as.logical(ind)]
p
grepl("^NA$", p)
grep("^NA$", p)
p[grep("^NA$", p)]
p[1]
p[2]
p[3]
p[c(1,2)]
p[c(1,4)]
class(grep("^NA$", p))
p[as.integer(grep("^NA$", p))]
p[as.integer(grepl("^NA$", p))]
grepl("^NA$", p, perl = TRUE)
p[grepl("^NA$", p, perl = TRUE)]
grepl("^NA$", p, perl = TRUE)
i <- .Last.value
i
p[i]
p[c(FALSE,FALSE,TRUE,FALSE)]
p[p=="NA"]
rm(p)
rm(i)
rm(ind)
p <- c(1,2,"NA",4)
p
ind <- grepl("^NA$", p)
p[ind] #Don't work
p[p=="NA"] #Don't work
p
1:10[c(1,3)]
